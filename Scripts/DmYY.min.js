// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: teal; icon-glyph: cogs;

class DmYY{constructor(arg){this.arg=arg;this._actions={};this.init();this.backGroundColor=Color.dynamic(new Color(this.settings.lightBgColor||'#fff'),new Color(this.settings.darkBgColor||'#000'),);this.widgetColor=Color.dynamic(new Color(this.settings.lightColor),new Color(this.settings.darkColor),)}BACKGROUND_NIGHT_KEY;widgetColor;backGroundColor;useBoxJS=true;isNight=Device.isUsingDarkAppearance();getRequest=(url='')=>{return new Request(url)};http=async(options={headers:{},url:''},type='JSON')=>{try{let request;if(type!=='IMG'){request=this.getRequest();Object.keys(options).forEach((key)=>{request[key]=options[key]});request.headers={...this.defaultHeaders,...options.headers}}else{request=this.getRequest(options.url);return await request.loadImage()}if(type==='JSON'){return await request.loadJSON()}if(type==='STRING'){return await request.loadString()}return await request.loadJSON()}catch(e){console.log('error:'+e)}};$request={get:async(url='',options={},type='JSON')=>{let params={...options,method:'GET'};if(typeof url==='object'){params={...params,...url}}else{params.url=url}let _type=type;if(typeof options==='string')_type=options;return await this.http(params,_type)},post:async(url='',options={},type='JSON')=>{let params={...options,method:'POST'};if(typeof url==='object'){params={...params,...url}}else{params.url=url}let _type=type;if(typeof options==='string')_type=options;return await this.http(params,_type)},};getCache=async(key)=>{try{const url='http://'+this.prefix+'/query/boxdata';const boxdata=await this.$request.get(url);console.log(boxdata.datas[key]);if(key)return boxdata.datas[key];return boxdata.datas}catch(e){console.log(e);return false}};transforJSON=(str)=>{if(typeof str=='string'){try{return JSON.parse(str)}catch(e){console.log(e);return str}}console.log('It is not a string!')};chooseImg=async()=>{return await Photos.fromLibrary()};getWidgetBackgroundImage=async(widget)=>{const backgroundImage=this.getBackgroundImage();widget.backgroundColor=this.backGroundColor;if(backgroundImage){const opacity=this.isNight?Number(this.settings.darkOpacity):Number(this.settings.lightOpacity);widget.backgroundImage=await this.shadowImage(backgroundImage,'#000',opacity);return true}else{return false}};verifyImage=async(img)=>{try{const{width,height}=img.size;const direct=true;if(width>1000){const options=['取消','打开图像处理'];const message='您的图片像素为'+width+' x '+height+'\n请将图片'+(direct?'宽度':'高度')+'调整到 1000 以下\n'+(!direct?'宽度':'高度')+'自动适应';const index=await this.generateAlert(message,options);if(index===1)Safari.openInApp('https://www.sojson.com/image/change.html',false);return false}return true}catch(e){return false}};async getWidgetScreenShot(title=null){function cropImage(img,rect){let draw=new DrawContext();draw.size=new Size(rect.width,rect.height);draw.drawImageAtPoint(img,new Point(-rect.x,-rect.y));return draw.getImage()}function phoneSizes(){return{'2532':{small:474,medium:1014,large:1062,left:78,right:618,top:231,middle:819,bottom:1407,},'2688':{small:507,medium:1080,large:1137,left:81,right:654,top:228,middle:858,bottom:1488,},'1792':{small:338,medium:720,large:758,left:54,right:436,top:160,middle:580,bottom:1000,},'2436':{small:465,medium:987,large:1035,left:69,right:591,top:213,middle:783,bottom:1353,},'2208':{small:471,medium:1044,large:1071,left:99,right:672,top:114,middle:696,bottom:1278,},'1334':{small:296,medium:642,large:648,left:54,right:400,top:60,middle:412,bottom:764,},'1136':{small:282,medium:584,large:622,left:30,right:332,top:59,middle:399,bottom:399,},'1624':{small:310,medium:658,large:690,left:46,right:394,top:142,middle:522,bottom:902,},'2001':{small:444,medium:963,large:972,left:81,right:600,top:90,middle:618,bottom:1146,},}}let message=title||'开始之前，请先前往桌面，截取空白界面的截图。然后回来继续';let exitOptions=['我已截图','前去截图 >'];let shouldExit=await this.generateAlert(message,exitOptions);if(shouldExit)return;let img=await Photos.fromLibrary();let height=img.size.height;let phone=phoneSizes()[height];if(!phone){message='好像您选择的照片不是正确的截图，请先前往桌面';await this.generateAlert(message,['我已知晓']);return}message='截图中要设置透明背景组件的尺寸类型是？';let sizes=['小尺寸','中尺寸','大尺寸'];let size=await this.generateAlert(message,sizes);let widgetSize=sizes[size];message='要设置透明背景的小组件在哪个位置？';message+=(height===1136?' （备注：当前设备只支持两行小组件，所以下边选项中的「中间」和「底部」的选项是一致的）':'');let crop={w:'',h:'',x:'',y:''};if(widgetSize==='小尺寸'){crop.w=phone.small;crop.h=phone.small;let positions=['左上角','右上角','中间左','中间右','左下角','右下角'];let _posotions=['Top left','Top right','Middle left','Middle right','Bottom left','Bottom right',];let position=await this.generateAlert(message,positions);let keys=_posotions[position].toLowerCase().split(' ');crop.y=phone[keys[0]];crop.x=phone[keys[1]]}else if(widgetSize==='中尺寸'){crop.w=phone.medium;crop.h=phone.small;crop.x=phone.left;let positions=['顶部','中间','底部'];let _positions=['Top','Middle','Bottom'];let position=await this.generateAlert(message,positions);let key=_positions[position].toLowerCase();crop.y=phone[key]}else if(widgetSize==='大尺寸'){crop.w=phone.medium;crop.h=phone.large;crop.x=phone.left;let positions=['顶部','底部'];let position=await this.generateAlert(message,positions);crop.y=position?phone.middle:phone.top}return cropImage(img,new Rect(crop.x,crop.y,crop.w,crop.h))}setLightAndDark=async(title,desc,light,dark)=>{try{const a=new Alert();a.title='白天和夜间'+title;a.message=!desc?'请自行去网站上搜寻颜色（Hex 颜色）':desc;a.addTextField('白天',(this.settings[light]||'')+'');a.addTextField('夜间',(this.settings[dark]||'')+'');a.addAction('确定');a.addCancelAction('取消');const id=await a.presentAlert();if(id===-1)return;this.settings[light]=a.textFieldValue(0);this.settings[dark]=a.textFieldValue(1);this.saveSettings()}catch(e){console.log(e)}};setAlertInput=async(title,desc,opt={},isSave=true)=>{const a=new Alert();a.title=title;a.message=!desc?'':desc;Object.keys(opt).forEach(key=>{a.addTextField(opt[key],this.settings[key])});a.addAction('确定');a.addCancelAction('取消');const id=await a.presentAlert();if(id===-1)return;const data={};Object.keys(opt).forEach((key,index)=>{data[key]=a.textFieldValue(index)});if(isSave){this.settings={...this.settings,...data};return this.saveSettings()}return data};setCacheBoxJSData=async(opt={})=>{const options=['取消','确定'];const message='代理缓存仅支持 BoxJS 相关的代理！';const index=await this.generateAlert(message,options);if(index===0)return;try{const boxJSData=await this.getCache();Object.keys(opt).forEach(key=>{this.settings[key]=boxJSData[opt[key]]||''});this.saveSettings()}catch(e){console.log(e);this.notify(this.name,'BoxJS 缓存读取失败！点击查看相关教程','https://chavyleung.gitbook.io/boxjs/awesome/videos',)}};setWidgetConfig=async()=>{const alert=new Alert();alert.title='内容配置';alert.message='主题设置、刷新时间等';alert.addAction('刷新时间');alert.addAction('主题设置');if(this.useBoxJS)alert.addAction('BoxJS域名');alert.addAction('重置所有');alert.addCancelAction('取消');const actions=[async()=>{await this.setAlertInput('刷新时间（分）','默认刷新时间 30 分钟刷新一次，也可自行手动运行',{refreshAfterDate:'分钟'})},async()=>{const a=new Alert();a.title='主题设置';a.addAction('背景设置');a.addAction('背景颜色');a.addAction('字体颜色');a.addAction('透明背景');a.addAction('蒙层透明');a.addAction('清空背景');a.addCancelAction('取消');let i=await a.presentSheet();if(i===-1)return;const _action=[async()=>{const message='白天和夜间背景';const options=['白天','夜间','取消'];const index=await this.generateAlert(message,options);if(index===2)return;const backImage=await this.chooseImg();if(!backImage||!await this.verifyImage(backImage))return;if(index===0)await this.setBackgroundImage(backImage,true);if(index===1)await this.setBackgroundNightImage(backImage,true)},async()=>await this.setLightAndDark('背景颜色',false,'lightBgColor','darkBgColor'),async()=>await this.setLightAndDark('字体颜色',false,'lightColor','darkColor'),async()=>{const message='请自行搭配相应的字体颜色。\n白天蒙层透明设置为 0\n夜间请自行调整参考值 0.26\n夜间开启了（深色外观下调暗壁纸）参考值 0.35';const options=['取消','确定'];const index=await this.generateAlert(message,options);if(index===0)return;const backImage=await this.getWidgetScreenShot();if(backImage)await this.setBackgroundImage(backImage,true)},async()=>{await this.setLightAndDark('透明','若是设置了透明背景，请自行调整','lightOpacity','darkOpacity')},()=>{this.setBackgroundImage(false,true)},];_action[i]&&_action[i].call(this)},...(this.useBoxJS?[async()=>{const a=new Alert();a.title='BoxJS 域名';a.addTextField('域名',this.settings.boxjsDomain);a.addAction('确定');a.addCancelAction('取消');const id=await a.presentAlert();if(id===-1)return;this.settings.boxjsDomain=a.textFieldValue(0);this.saveSettings()},]:[]),async()=>{const options=['取消','确定'];const message='该操作不可逆，会清空所有组件配置！';const index=await this.generateAlert(message,options);if(index===0)return;this.settings={};await this.setBackgroundImage(false,false);this.saveSettings()},];const id=await alert.presentAlert();if(id===-1)return;actions[id]&&actions[id].call(this)};init(widgetFamily=config.widgetFamily){this.widgetFamily=widgetFamily;this.SETTING_KEY=this.md5(Script.name());this.FILE_MGR=FileManager[module.filename.includes('Documents/iCloud~')?'iCloud':'local']();this.FILE_MGR_LOCAL=FileManager.local();this.BACKGROUND_KEY=this.FILE_MGR_LOCAL.joinPath(this.FILE_MGR_LOCAL.documentsDirectory(),'bg_'+this.SETTING_KEY+'.jpg',);this.BACKGROUND_NIGHT_KEY=this.FILE_MGR_LOCAL.joinPath(this.FILE_MGR_LOCAL.documentsDirectory(),'bg_'+this.SETTING_KEY+'night.jpg',);this.settings=this.getSettings();this.settings.lightColor=this.settings.lightColor||'#000';this.settings.darkColor=this.settings.darkColor||'#fff';this.settings.boxjsDomain=this.settings.boxjsDomain||'boxjs.net';this.settings.refreshAfterDate=this.settings.refreshAfterDate||'30';this.settings.lightOpacity=this.settings.lightOpacity||'0.7';this.settings.darkOpacity=this.settings.darkOpacity||'0.4';this.prefix=this.settings.boxjsDomain}registerAction(name,func){this._actions[name]=func.bind(this)}base64Encode(str){const data=Data.fromString(str);return data.toBase64String()}base64Decode(b64){const data=Data.fromBase64String(b64);return data.toRawString()}md5(str){function d(n,t){var r=(65535&n)+(65535&t);return(((n>>16)+(t>>16)+(r>>16))<<16)|(65535&r)}function f(n,t,r,e,o,u){return d(((c=d(d(t,n),d(e,u)))<<(f=o))|(c>>>(32-f)),r);var c,f}function l(n,t,r,e,o,u,c){return f((t&r)|(~t&e),n,t,o,u,c)}function v(n,t,r,e,o,u,c){return f((t&e)|(r&~e),n,t,o,u,c)}function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}function i(n,t){var r,e,o,u;(n[t>>5]|=128<<t%32),(n[14+(((t+64)>>>9)<<4)]=t);for(var c=1732584193,f=-271733879,i=-1732584194,a=271733878,h=0;h<n.length;h+=16)(c=l((r=c),(e=f),(o=i),(u=a),n[h],7,-680876936)),(a=l(a,c,f,i,n[h+1],12,-389564586)),(i=l(i,a,c,f,n[h+2],17,606105819)),(f=l(f,i,a,c,n[h+3],22,-1044525330)),(c=l(c,f,i,a,n[h+4],7,-176418897)),(a=l(a,c,f,i,n[h+5],12,1200080426)),(i=l(i,a,c,f,n[h+6],17,-1473231341)),(f=l(f,i,a,c,n[h+7],22,-45705983)),(c=l(c,f,i,a,n[h+8],7,1770035416)),(a=l(a,c,f,i,n[h+9],12,-1958414417)),(i=l(i,a,c,f,n[h+10],17,-42063)),(f=l(f,i,a,c,n[h+11],22,-1990404162)),(c=l(c,f,i,a,n[h+12],7,1804603682)),(a=l(a,c,f,i,n[h+13],12,-40341101)),(i=l(i,a,c,f,n[h+14],17,-1502002290)),(c=v(c,(f=l(f,i,a,c,n[h+15],22,1236535329)),i,a,n[h+1],5,-165796510,)),(a=v(a,c,f,i,n[h+6],9,-1069501632)),(i=v(i,a,c,f,n[h+11],14,643717713)),(f=v(f,i,a,c,n[h],20,-373897302)),(c=v(c,f,i,a,n[h+5],5,-701558691)),(a=v(a,c,f,i,n[h+10],9,38016083)),(i=v(i,a,c,f,n[h+15],14,-660478335)),(f=v(f,i,a,c,n[h+4],20,-405537848)),(c=v(c,f,i,a,n[h+9],5,568446438)),(a=v(a,c,f,i,n[h+14],9,-1019803690)),(i=v(i,a,c,f,n[h+3],14,-187363961)),(f=v(f,i,a,c,n[h+8],20,1163531501)),(c=v(c,f,i,a,n[h+13],5,-1444681467)),(a=v(a,c,f,i,n[h+2],9,-51403784)),(i=v(i,a,c,f,n[h+7],14,1735328473)),(c=g(c,(f=v(f,i,a,c,n[h+12],20,-1926607734)),i,a,n[h+5],4,-378558,)),(a=g(a,c,f,i,n[h+8],11,-2022574463)),(i=g(i,a,c,f,n[h+11],16,1839030562)),(f=g(f,i,a,c,n[h+14],23,-35309556)),(c=g(c,f,i,a,n[h+1],4,-1530992060)),(a=g(a,c,f,i,n[h+4],11,1272893353)),(i=g(i,a,c,f,n[h+7],16,-155497632)),(f=g(f,i,a,c,n[h+10],23,-1094730640)),(c=g(c,f,i,a,n[h+13],4,681279174)),(a=g(a,c,f,i,n[h],11,-358537222)),(i=g(i,a,c,f,n[h+3],16,-722521979)),(f=g(f,i,a,c,n[h+6],23,76029189)),(c=g(c,f,i,a,n[h+9],4,-640364487)),(a=g(a,c,f,i,n[h+12],11,-421815835)),(i=g(i,a,c,f,n[h+15],16,530742520)),(c=m(c,(f=g(f,i,a,c,n[h+2],23,-995338651)),i,a,n[h],6,-198630844,)),(a=m(a,c,f,i,n[h+7],10,1126891415)),(i=m(i,a,c,f,n[h+14],15,-1416354905)),(f=m(f,i,a,c,n[h+5],21,-57434055)),(c=m(c,f,i,a,n[h+12],6,1700485571)),(a=m(a,c,f,i,n[h+3],10,-1894986606)),(i=m(i,a,c,f,n[h+10],15,-1051523)),(f=m(f,i,a,c,n[h+1],21,-2054922799)),(c=m(c,f,i,a,n[h+8],6,1873313359)),(a=m(a,c,f,i,n[h+15],10,-30611744)),(i=m(i,a,c,f,n[h+6],15,-1560198380)),(f=m(f,i,a,c,n[h+13],21,1309151649)),(c=m(c,f,i,a,n[h+4],6,-145523070)),(a=m(a,c,f,i,n[h+11],10,-1120210379)),(i=m(i,a,c,f,n[h+2],15,718787259)),(f=m(f,i,a,c,n[h+9],21,-343485551)),(c=d(c,r)),(f=d(f,e)),(i=d(i,o)),(a=d(a,u));return[c,f,i,a]}function a(n){for(var t='',r=32*n.length,e=0;e<r;e+=8)t+=String.fromCharCode((n[e>>5]>>>e%32)&255);return t}function h(n){var t=[];for(t[(n.length>>2)-1]=void 0,e=0;e<t.length;e+=1)t[e]=0;for(var r=8*n.length,e=0;e<r;e+=8)t[e>>5]|=(255&n.charCodeAt(e/8))<<e%32;return t}function e(n){for(var t,r='0123456789abcdef',e='',o=0;o<n.length;o+=1)(t=n.charCodeAt(o)),(e+=r.charAt((t>>>4)&15)+r.charAt(15&t));return e}function r(n){return unescape(encodeURIComponent(n))}function o(n){return a(i(h((t=r(n))),8*t.length));var t}function u(n,t){return(function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)(u[r]=909522486^o[r]),(c[r]=1549556828^o[r]);return((e=i(u.concat(h(t)),512+8*t.length)),a(i(c.concat(e),640)))})(r(n),r(t))}function t(n,t,r){return t?(r?u(t,n):e(u(t,n))):r?o(n):e(o(n))}return t(str)}async renderHeader(widget,icon,title,color=false){let header=widget.addStack();header.centerAlignContent();try{const image=await this.$request.get(icon,'IMG');let _icon=header.addImage(image);_icon.imageSize=new Size(14,14);_icon.cornerRadius=4}catch(e){console.log(e)}header.addSpacer(10);let _title=header.addText(title);if(color)_title.textColor=color;_title.textOpacity=0.7;_title.font=Font.boldSystemFont(12);_title.lineLimit=1;widget.addSpacer(15);return widget}async generateAlert(message,options){let alert=new Alert();alert.message=message;for(const option of options){alert.addAction(option)}return await alert.presentAlert()}async notify(title,body,url,opts={}){let n=new Notification();n=Object.assign(n,opts);n.title=title;n.body=body;if(url)n.openURL=url;return await n.schedule()}async shadowImage(img,color='#000000',opacity=0.7){if(!img)return;if(opacity===0)return img;let ctx=new DrawContext();ctx.size=img.size;ctx.drawImageInRect(img,new Rect(0,0,img.size['width'],img.size['height']),);ctx.setFillColor(new Color(color,opacity));ctx.fillRect(new Rect(0,0,img.size['width'],img.size['height']));return await ctx.getImage()}getSettings(json=true){let res=json?{}:'';let cache='';if(Keychain.contains(this.SETTING_KEY)){cache=Keychain.get(this.SETTING_KEY)}if(json){try{res=JSON.parse(cache)}catch(e){}}else{res=cache}return res}saveSettings(notify=true){let res=typeof this.settings==='object'?JSON.stringify(this.settings):String(this.settings);Keychain.set(this.SETTING_KEY,res);if(notify)this.notify('设置成功','桌面组件稍后将自动刷新')}getBackgroundImage(){let result=null;if(this.FILE_MGR_LOCAL.fileExists(this.BACKGROUND_KEY)){result=Image.fromFile(this.BACKGROUND_KEY)}if(this.isNight&&this.FILE_MGR_LOCAL.fileExists(this.BACKGROUND_NIGHT_KEY)){result=Image.fromFile(this.BACKGROUND_NIGHT_KEY)}return result}setBackgroundImage(img,notify=true){if(!img){if(this.FILE_MGR_LOCAL.fileExists(this.BACKGROUND_KEY)){this.FILE_MGR_LOCAL.remove(this.BACKGROUND_KEY)}if(notify)this.notify('移除成功','小组件白天背景图片已移除，稍后刷新生效')}else{this.FILE_MGR_LOCAL.writeImage(this.BACKGROUND_KEY,img);if(notify)this.notify('设置成功','小组件白天背景图片已设置！稍后刷新生效')}}setBackgroundNightImage(img,notify=true){if(!img){if(this.FILE_MGR_LOCAL.fileExists(this.BACKGROUND_NIGHT_KEY)){this.FILE_MGR_LOCAL.remove(this.BACKGROUND_NIGHT_KEY)}if(notify)this.notify('移除成功','小组件夜间背景图片已移除，稍后刷新生效')}else{this.FILE_MGR_LOCAL.writeImage(this.BACKGROUND_NIGHT_KEY,img);if(notify)this.notify('设置成功','小组件夜间背景图片已设置！稍后刷新生效')}}getRandomArrayElements(arr,count){let shuffled=arr.slice(0),i=arr.length,min=i-count,temp,index;min=min>0?min:0;while(i-->min){index=Math.floor((i+1)*Math.random());temp=shuffled[index];shuffled[index]=shuffled[i];shuffled[i]=temp}return shuffled.slice(min)}textFormat={defaultText:{size:14,font:'regular',color:this.widgetColor},battery:{size:10,font:'bold',color:this.widgetColor},title:{size:16,font:'semibold',color:this.widgetColor},SFMono:{size:12,font:'SF Mono',color:this.widgetColor},};provideFont=(fontName,fontSize)=>{const fontGenerator={'ultralight':function(){return Font.ultraLightSystemFont(fontSize)},'light':function(){return Font.lightSystemFont(fontSize)},'regular':function(){return Font.regularSystemFont(fontSize)},'medium':function(){return Font.mediumSystemFont(fontSize)},'semibold':function(){return Font.semiboldSystemFont(fontSize)},'bold':function(){return Font.boldSystemFont(fontSize)},'heavy':function(){return Font.heavySystemFont(fontSize)},'black':function(){return Font.blackSystemFont(fontSize)},'italic':function(){return Font.italicSystemFont(fontSize)},};const systemFont=fontGenerator[fontName];if(systemFont){return systemFont()}return new Font(fontName,fontSize)};provideText=(string,container,format)=>{const textItem=container.addText(string);const textFont=format.font;const textSize=format.size;const textColor=format.color;textItem.font=this.provideFont(textFont,textSize);textItem.textColor=textColor;return textItem}}const Runing=async(Widget,default_args='',isDebug=true,extra)=>{let M=null;if(config.runsInWidget){M=new Widget(args.widgetParameter||'');if(extra){Object.keys(extra).forEach((key)=>{M[key]=extra[key]})}const W=await M.render();try{if(M.settings.refreshAfterDate){W.refreshAfterDate=new Date(new Date()+1000*60*parseInt(M.settings.refreshAfterDate))}}catch(e){console.log(e)}if(W){Script.setWidget(W);Script.complete()}}else{let{act,data,__arg,__size}=args.queryParameters;M=new Widget(__arg||default_args||'');if(extra){Object.keys(extra).forEach((key)=>{M[key]=extra[key]})}if(__size)M.init(__size);if(!act||!M['_actions']){const actions=M['_actions'];const _actions=[async(debug=false)=>{let a=new Alert();a.title='预览组件';a.message='测试桌面组件在各种尺寸下的显示效果';a.addAction('小尺寸 Small');a.addAction('中尺寸 Medium');a.addAction('大尺寸 Large');a.addAction('全部 All');a.addCancelAction('取消操作');const funcs=[];if(debug){for(let _ in actions){a.addAction(_);funcs.push(actions[_].bind(M))}a.addDestructiveAction('停止调试')}let i=await a.presentSheet();if(i===-1)return;let w;switch(i){case 0:M.widgetFamily='small';w=await M.render();w&&(await w.presentSmall());break;case 1:M.widgetFamily='medium';w=await M.render();w&&(await w.presentMedium());break;case 2:M.widgetFamily='large';w=await M.render();w&&(await w.presentLarge());break;case 3:M.widgetFamily='small';w=await M.render();w&&(await w.presentSmall());M.widgetFamily='medium';w=await M.render();w&&(await w.presentMedium());M.widgetFamily='large';w=await M.render();w&&(await w.presentLarge());break;default:const func=funcs[i-4];if(func)await func();break}return i},];const alert=new Alert();alert.title=M.name;alert.message=M.desc;alert.addAction('预览组件');for(let _ in actions){alert.addAction(_);_actions.push(actions[_])}alert.addCancelAction('取消操作');const idx=await alert.presentSheet();if(_actions[idx]){const func=_actions[idx];await func()}return}let _tmp=act.split('-').map((_)=>_[0].toUpperCase()+_.substr(1)).join('');let _act='action'+_tmp;if(M[_act]&&typeof M[_act]==='function'){const func=M[_act].bind(M);await func(data)}}};module.exports={DmYY,Runing};